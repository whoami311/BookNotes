# chapter14 重载运算与类型转换

1. 通常情况下，不应该重载逗号、取地址、逻辑与和逻辑或运算符。

2. 通常，输出运算符应该主要负责打印对象的内容而非控制格式，输出运算符不应该打印换行符。

3. 输入运算符必须处理输入可能失败的情况，而输出运算符不需要。

4. 当读取操作发生错误时，输入运算符应该负责从错误中恢复。

5. 如果类同时定义了算术运算符和相关的复合赋值运算符，则通常情况下应该使用复合赋值来实现算术运算符。

6. 如果某个类在逻辑上有相等性的含义，则该类应该定义operator==，这样做可以使得用户更容易使用标准库算法来处理这个类。

7. 如果存在唯一一种逻辑可靠的<定义，则应该考虑为这个类定义<运算符。如果类同时还包含==，则当且仅当<的定义和==产生的结果一致时才定义<运算符。

8. 我们可以重载赋值运算符，不论形参的类型是什么，赋值运算符都必须定义为成员函数。

9. 赋值运算符必须定义成类的成员，复合赋值运算符通常情况下也应该这样做。这两类运算符都应该返回左侧运算对象的引用。

10. 下标运算符必须是成员函数。

11. 如果一个类包含下标运算符，则它通常会定义两个版本：一个返回普通引用，另一个是类的常量成员并且返回常量引用。

12. 定义递增和递减运算符的类应该同时定义前置版本和后置版本。这些运算符通常应该被定义成类的成员。

13. 为了与内置版本保持一致，前置运算符应该返回递增或递减后对象的引用。

14. 后置运算符应该返回对象的原值（递增或递减之前的值），返回的形式是一个值而非引用。

15. 箭头运算符必须是类的成员。解引用运算符通常也是类的成员，尽管并非必须如此。

16. 重载的箭头运算符必须返回类的指针或者自定义了箭头运算符的某个类的对象。

17. 函数调用运算符必须是成员函数。一个类可以定义多个不同版本的调用运算符，相互之间应该在参数数量或类型上有区别。

18. 一个类型转换函数必须是类的成员函数；它不能声明返回类型，形参列表也必须为空。类型转换函数通常应该是const。

19. 向bool的类型转换通常用在条件部分，因此operator bool一般定义成explicit的。

20. 通常情况下，不要为类定义相同的类型转换，也不要在类中定义两个及两个以上转换源或转换目标是算术类型的转换。

21. 当我们使用两个用户定义的类型转换时，如果转换函数之前或之后存在标准类型转换，则标准类型转换将决定最佳匹配到底是哪个。

22. 除了显式地向bool类型的转换以外，我们应该尽量避免定义类型转换函数并尽可能地限制那些“显然正确”的非显式构造函数。

23. 如果在调用重载函数时我们需要使用构造函数或者强制类型转换来改变实参的类型，则这通常意味着程序的设计存在不足。

24. 在调用重载函数时，如果需要额外的标准类型转换，则该转换的级别只有当所有可行函数都请求同一个用户定义的类型转换时才有用。如果所需的用户定义的类型转换不止一个，则该调用具有二义性。

25. 表达式中运算符的候选函数集既应该包括成员函数，也应该包括非成员函数。

26. 如果我们对同一个类既提供了转换目标是算数类型的类型转换，也提供了重载的运算符，则将会遇到重载运算符与内置运算符的二义性问题。
