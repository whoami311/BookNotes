# 非类型模板参数

对于函数模板和类模板，其模板参数不必是具体类型，也可以是普通数值。和模板使用类型参数一样，定义代码的某些细节待定，直至使用该代码时才会确定这些细节。不过，在这里待定细节不是类型而是值。在使用这种模板时，必须显式指定这个值，然后实例化生成代码。

## 非类型模板参数的限制

非类型模板参数有一些限制，一般来说，它们只能是 `int` 类型常量（包括枚举常量）、指向对象 / 函数 / 成员的指针、对象或函数的左值引用，或者是 `std::nullptr_t`（`nullptr` 类型）。

当传递对象的指针或引用作为模板实参时，该对象不能是字符串字面量、临时变量或数据成员以及其他子对象。由于 C++17 之前的每次版本更新都会不断放宽这些限制，另外适用于早期版本的限制如下。

- 在 C++11 中，对象也必须有外部链接。
- 在 C++14 中，对象也必须有外部或内部链接。

### 避免无效表达式

非类型模板参数的实参可以是任何编译器表达式。

如果在表达式中使用了运算符 `>`（`operator>`），则必须将整个表达式放入圆括号内，以便让嵌套外层的符号 `>` 来终止实参列表。

## 模板参数类型 `auto`

从 C++17 开始，可以定义一个非类型模板参数来普遍接受非类型参数所允许的任意类型。

## 小结

- 模板可以具有数值的模板参数而不只是类型的模板参数。
- 不能将浮点数或类类型对象用作非类型模板参数。对于字符串字面量、临时变量和子对象的指针或引用也有限制。
- 使用 `auto` 可以使模板具有泛型类型值的非类型模板参数。
