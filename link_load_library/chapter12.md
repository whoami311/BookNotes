# 系统调用与 API

系统调用是应用程序（运行库也是应用程序的一部分）与操作系统内核之间的接口，它决定了应用程序是如何与内核打交道的。

## 系统调用原理

系统调用是运行在内核态的，而应用程序基本都是运行在用户态的。操作系统一般是通过**中断（Interrupt）**来从用户态切换到内核态。中断是一个硬件或软件发出的请求，要求 CPU 暂停当前的工作转手去处理更加重要的事情。

中断一般具有两个属性，一个称为**中断号**（从 0 开始），一个称为**中断处理程序（Interrupt Service Routine, ISR）**。不同的中断具有不同的中断号，而同时一个中断处理程序一一对应一个中断号。在内核中，有一个数组称为**中断向量表（Interrupt Vector Table）**，这个数组的第 n 项包含了指向第 n 号中断的中断处理程序的指针。当中断到来时，CPU 会暂停当前执行的代码，根据中断的中断号，在中断向量表中找到对应的中断处理程序，并调用它。中断处理程序执行完成之后，CPU 会继续执行之前的代码。
